#网络爬虫

##通用框架
![Common Crawler Framework](http://simondolph.github.io/posts/images/common-crawler-framework.png)

爬虫类型根据应用不同而不同
1. 批量型爬虫
2. 增量型爬虫
3. 垂直型爬虫

##优秀爬虫特性
高性能、可扩展性、健壮性、友好性

##评价标准
在资源有限的情况下，网络爬虫只能抓取互联网现存网页的一部分，那就_尽可能_选择比较重要的那部分页面来索引；
对于已抓取到的网页，_尽可能_快的更新其内容，使得索引网页和真实网页同步；
在此基础上，_尽可能_扩大抓取范围，抓取到更多以前未发现的网页。

##抓取策略
###宽度优先遍历策略
虽然看似机械，但实际基本上是按网页的重要性排序的（更重要，更多入链，更有可能被宽度优先遍历策略抓到），隐含了网页优先级假设。
###非完全PageRank策略
###OCIP策略 （Online Page Importance Computation）
分配cash, 优先下载cash多的。略优于宽度优先遍历策略。
###大站优先策略

##网页更新策略
###历史参考策略
假设：过去频繁更新的网页，将来也会频繁更新。
利用_泊松过程_来对网页的变化进行建模
###用户体验策略
判断一个网页何时更新，取决于这个网页的内容变化所带来的搜索质量的变化。影响越大的网页，应越快更新。
###聚类抽样策略
假设：网页的属性可以用来预测其更新周期，具有相似属性的网页其更新周期也应该是相似的。
根据属性将网页_聚类_，对类别内网页进行_抽样_，以被抽样网页的更新周期作为类别的更新周期。

##暗网抓取(Deep Web Crawling)
暗网指搜索引擎爬虫按照常规方式很难抓取到的Web页面。搜索引擎依赖页面中的链接关系发现新页面，但很多网站的内容是以数据库方式存储的。典型的例子是一些垂直领域网站(e.g.携程、当当)，没有显示链接指向数据库记录，往往是通过网站的组合查询，得到相关数据。

为了对暗网数据进行索引，需要与常规爬虫机制不同的暗网爬虫。搜索巨头都将其作为重点研发方向([百度“阿拉丁计划”](http://baike.baidu.com/view/2086291.htm))。
###查询组合问题
给被访问网站造成的压力尽量少、爬虫自身资源消耗尽量小的同时，尽量多地下载垂直网站数据库中的数据。
Google Solution：富含信息查询模板
###文本框填写问题
人工启发+递归迭代

##分布式爬虫
###主从式分布爬虫(Master-Slave)
URL服务器维护待抓取URL队列，及URL的分配和抓取服务器的负载均衡。抓取服务器进行真正抓取。
###对等式分布爬虫（Peer to Peer）
1. 每台服务器承担相同功能，各自负责部分URL的抓取。
2. 任务分工问题，hash网站主域名，取模匹配服务器编号。
3. Optimization：对网站主域名进行一致性hash。